#!/bin/bash

set -euo pipefail

# Pretty print functions
info()    { echo -e "\033[1;34m[INFO]\033[0m $*"; }
warn()    { echo -e "\033[1;33m[WARN]\033[0m $*"; }
error()   { echo -e "\033[1;31m[ERROR]\033[0m $*"; }
success() { echo -e "\033[1;32mâœ… $*\033[0m"; }

{{ if eq .chezmoi.osRelease.id "pop" -}}

sudo apt update

{{ range .packages.ubuntu }}
sudo apt install -y {{ . }}
{{- end }}

{{ range .packages.dpkg }}
wget -qO- {{ . | quote }} > /tmp/pkg.deb && sudo dpkg -i /tmp/pkg.deb && rm -rf /tmp/pkg.deb
{{- end }}

{{ range .packages.brew }}
brew install {{ . }}
{{- end }}

info "Setup firecfg"
# Enable firejail
sudo firecfg
success "Firejail enabled"

{{- end }}
